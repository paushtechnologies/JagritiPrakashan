import{g as C,e as j,r as p,f as y,j as t,s as S,h as A,i as z,R as D,B as c,S as n,T as f,c as g,L as I,I as W,k as B}from"./index-BJGSD-D4.js";import{C as R,a as E,D as T}from"./DialogContent-COfgdrRn.js";import{S as u}from"./Stack-BwJJOA25.js";import{D as H}from"./Dialog-Br9Ouclg.js";function L(e){return C("MuiCardActions",e)}j("MuiCardActions",["root","spacing"]);const M=e=>{const{classes:i,disableSpacing:r}=e;return z({root:["root",!r&&"spacing"]},L,i)},U=S("div",{name:"MuiCardActions",slot:"Root",overridesResolver:(e,i)=>{const{ownerState:r}=e;return[i.root,!r.disableSpacing&&i.spacing]}})({display:"flex",alignItems:"center",padding:8,variants:[{props:{disableSpacing:!1},style:{"& > :not(style) ~ :not(style)":{marginLeft:8}}}]}),G=p.forwardRef(function(i,r){const a=y({props:i,name:"MuiCardActions"}),{disableSpacing:d=!1,className:x,...l}=a,o={...a,disableSpacing:d},m=M(o);return t.jsx(U,{className:A(m.root,x),ownerState:o,ref:r,...l})});function _({book:e,onAddToCart:i,loading:r=!1}){const[a,d]=p.useState(!1),[x,l]=p.useState(!1),o=!!e;D.useEffect(()=>{if(o&&!r){const s=[];e.price>0||s.push("price (invalid/zero)"),e.image||s.push("image (missing source)"),e.title||s.push("title (missing)"),a&&s.push("image (failed to load)"),s.length>0&&console.warn(`[BookCard Debug] ID ${e.id} | "${e.title||"Untitled"}" missing: ${s.join(", ")}`)}},[e,o,r,a]);const m=s=>{s.preventDefault(),l(!0)},h=s=>{s&&s.stopPropagation(),l(!1)},v={xs:110,sm:160},w={xs:260,sm:320},b={xs:180,sm:240};return t.jsxs(R,{elevation:3,sx:{width:v,height:w,display:"flex",flexDirection:"column",borderRadius:{xs:1,md:2},padding:{xs:0,md:0},overflow:"hidden",transition:"all 0.3s cubic-bezier(0.25, 0.8, 0.25, 1)",transformStyle:"preserve-3d",perspective:"1000px","@media (hover: hover)":{"&:hover":{transform:"translateY(-8px) rotateX(4deg) scale(1.02)",boxShadow:"0 12px 24px -10px rgba(0,0,0,0.3)"}}},children:[t.jsx(c,{sx:{height:b,width:"100%",overflow:"hidden"},children:r||!o?t.jsx(n,{variant:"rectangular",width:"100%",height:"100%",animation:"wave"}):e.image&&!a?t.jsx(c,{component:"img",src:e.image,alt:e.title,onError:()=>d(!0),onClick:m,sx:{width:"100%",height:"100%",objectFit:"cover",display:"block",cursor:"zoom-in",transition:"transform 0.4s","@media (hover: hover)":{"&:hover":{transform:"scale(1.1)"}}}}):e.title||e.author?t.jsx(c,{sx:{position:"relative",width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center",bgcolor:"#f7f7f7",px:1.75,overflow:"hidden"},children:t.jsxs(c,{sx:{width:"100%"},children:[t.jsx(f,{variant:"body2",sx:{fontWeight:700,textAlign:"center",color:"text.primary",fontSize:{xs:"0.75rem",sm:"1.25rem"},textTransform:"uppercase",letterSpacing:.5,lineHeight:1.5,display:"-webkit-box",WebkitLineClamp:4,WebkitBoxOrient:"vertical",overflow:"hidden",wordBreak:"break-word",textShadow:"0 0 10px rgba(255,255,255,0.8)"},children:e.title}),e.author&&t.jsxs(f,{variant:"subtitle2",sx:{mt:{xs:1,sm:2.5},textAlign:"center",fontStyle:"italic",color:"text.secondary",fontSize:{xs:"0.75rem",sm:"0.90rem"},display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical",overflow:"hidden"},children:["लेखक : ",e.author]})]})}):t.jsx(n,{variant:"rectangular",width:"100%",height:"100%",animation:"wave"})}),t.jsx(E,{sx:{flexGrow:0,px:{xs:.5,md:1},py:{xs:.2,md:.5},display:"flex",flexDirection:"column",justifyContent:"space-between"},children:e?.price>0?t.jsxs(f,{sx:{mt:0,fontSize:{xs:"1.05rem",sm:"1.35rem"},fontWeight:600,color:"#f0b04f"},children:["₹",e.price]}):t.jsx(n,{variant:"text",sx:{fontSize:{xs:"1.05rem",sm:"1.35rem"},width:"60%",mt:.5},animation:"wave"})}),t.jsx(G,{sx:{px:{xs:.5,md:1},pt:{xs:0,md:0}},children:!o||r?t.jsxs(u,{direction:{xs:"column",sm:"row"},spacing:.5,sx:{width:"100%"},children:[t.jsx(n,{variant:"rounded",height:28,animation:"wave",sx:{width:{xs:"100%",sm:"48%"}}}),t.jsx(n,{variant:"rounded",height:28,animation:"wave",sx:{width:{xs:"100%",sm:"48%"}}})]}):t.jsxs(u,{direction:{xs:"column",sm:"row"},spacing:.5,sx:{width:"100%"},children:[t.jsx(g,{component:I,to:`/book/${e.id}`,variant:"outlined",size:"small",fullWidth:{xs:!0,sm:!1},sx:{borderColor:"#f0b04f",color:"#f0b04f",px:{xs:0,sm:2.5},py:{xs:0,sm:.6},backgroundColor:"transparent",textTransform:"none",fontWeight:600,fontSize:{xs:"1rem",sm:"1rem"},boxShadow:"0 2px 4px rgba(240, 176, 79, 0.1)",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)","@media (hover: hover)":{"&:hover":{backgroundColor:"#f0b04f",color:"#fff",borderColor:"#f0b04f",boxShadow:"0 4px 12px rgba(240, 176, 79, 0.3)",transform:"translateY(-2px)"}},"&:active":{transform:"scale(0.96)",backgroundColor:"#f0b04f",color:"#fff"}},children:"View"}),t.jsx(g,{variant:"contained",size:"small",fullWidth:{xs:!0,sm:!1},onClick:s=>{s.preventDefault(),i(e.id,1)},sx:{background:"linear-gradient(135deg, #f0b04f 0%, #ffc870 100%)",color:"#fff",textTransform:"none",fontWeight:700,px:{xs:0,sm:1.8},py:{xs:0,sm:.6},fontSize:{xs:"1rem",sm:"1rem"},border:"none",boxShadow:"0 4px 12px rgba(214, 185, 141, 0.3)",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)","@media (hover: hover)":{"&:hover":{background:"linear-gradient(135deg, #ffc870 0%, #f0b04f 100%)",boxShadow:"0 6px 20px rgba(240, 176, 79, 0.4)",transform:"translateY(-2px)",color:"#1A1A1A"}},"&:active":{transform:"scale(0.96)",boxShadow:"0 2px 8px rgba(240, 176, 79, 0.2)",color:"#1A1A1A"}},children:"Add"})]})}),t.jsx(H,{open:x,onClose:h,maxWidth:"sm",children:t.jsxs(T,{sx:{p:0,position:"relative",bgcolor:"#000",display:"flex",justifyContent:"center",overflow:"hidden"},children:[t.jsx(W,{onClick:h,sx:{position:"absolute",top:8,right:8,zIndex:10,color:"#fff",bgcolor:"rgba(0,0,0,0.5)","&:hover":{bgcolor:"rgba(0,0,0,0.8)"}},children:t.jsx(B,{})}),e&&(e.fullImage||e.image)&&t.jsx("img",{src:e.fullImage||e.image,alt:e.title,style:{maxWidth:"100%",maxHeight:"85vh",display:"block",objectFit:"contain"}})]})})]})}export{_ as B};
