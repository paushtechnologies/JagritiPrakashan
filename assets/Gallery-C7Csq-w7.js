import{g as w,e as M,r as x,f as S,j as t,s as b,h as I,i as E,B as m,S as c,T as u,b as R,I as z,k as B}from"./index-BktuqYFA.js";import{C,a as y,D}from"./DialogContent-Cv7mxAOp.js";import{D as W}from"./Dialog-BNP6nbw3.js";function A(r){return w("MuiCardMedia",r)}M("MuiCardMedia",["root","media","img"]);const N=r=>{const{classes:a,isMediaComponent:n,isImageComponent:i}=r;return E({root:["root",n&&"media",i&&"img"]},A,a)},O=b("div",{name:"MuiCardMedia",slot:"Root",overridesResolver:(r,a)=>{const{ownerState:n}=r,{isMediaComponent:i,isImageComponent:l}=n;return[a.root,i&&a.media,l&&a.img]}})({display:"block",backgroundSize:"cover",backgroundRepeat:"no-repeat",backgroundPosition:"center",variants:[{props:{isMediaComponent:!0},style:{width:"100%"}},{props:{isImageComponent:!0},style:{objectFit:"cover"}}]}),T=["video","audio","picture","iframe","img"],P=["picture","img"],U=x.forwardRef(function(a,n){const i=S({props:a,name:"MuiCardMedia"}),{children:l,className:p,component:d="div",image:o,src:h,style:g,...e}=i,s=T.includes(d),v=!s&&o?{backgroundImage:`url("${o}")`,...g}:g,f={...i,component:d,isMediaComponent:s,isImageComponent:P.includes(d)},j=N(f);return t.jsx(O,{className:I(j.root,p),as:d,role:!s&&o?"img":void 0,ref:n,style:v,ownerState:f,src:s?o||h:void 0,...e,children:l})});function G({books:r=[],addToCart:a,loading:n=!1}){const[i,l]=x.useState(null),p=x.useRef(null),d=()=>l(null),[o,h]=x.useState({});x.useEffect(()=>{!n&&r.length>0&&r.forEach(e=>{const s=[];e.price>0||s.push("price (invalid/zero)"),e.image||s.push("image (missing source)"),o[e.id]&&s.push("image (failed to load)"),s.length>0&&console.warn(`[Gallery Debug] ID ${e.id} | "${e.title}" missing: ${s.join(", ")}`)})},[r,n,o]);const g=e=>{h(s=>({...s,[e]:!0}))};return t.jsxs(m,{ref:p,sx:{mt:{xs:2,sm:8},mb:{xs:4,sm:8}},children:[t.jsx(m,{sx:{px:{xs:1,sm:0},mt:{xs:1,sm:2},display:"grid",gridTemplateColumns:{xs:"repeat(3, 1fr)",sm:"repeat(3,1fr)",md:"repeat(5,1fr)",lg:"repeat(7,1fr)"},gap:{xs:1,sm:2}},children:n?Array.from(new Array(21)).map((e,s)=>t.jsxs(C,{sx:{width:"100%",height:"100%",borderRadius:{xs:1,sm:2},boxShadow:{xs:2,sm:3}},children:[t.jsx(c,{variant:"rectangular",height:200,animation:"wave"}),t.jsxs(y,{sx:{p:1},children:[t.jsx(c,{variant:"text",width:"60%"}),t.jsx(c,{variant:"rectangular",width:50,height:24,sx:{mt:1}})]})]},s)):r.filter(e=>e.display==="card").map((e,s)=>t.jsxs(C,{sx:{width:"100%",display:"flex",flexDirection:"column",borderRadius:{xs:1,sm:2},boxShadow:{xs:3,sm:6},height:{xs:"95%",md:"99%"},overflow:"hidden",transition:"transform 0.2s ease-out",willChange:"transform","&:hover":{transform:"translateY(-4px) scale(1.02)"}},children:[t.jsx(m,{sx:{position:"relative",height:{xs:150,sm:200,md:230},cursor:"pointer",backgroundColor:"#f7f7f7",overflow:"hidden"},onClick:()=>l(e),children:e.image&&!o[e.id]?t.jsx(U,{component:"img",image:e.image,alt:e.title,loading:s<21?"eager":"lazy",decoding:"async",fetchPriority:s<21?"high":"auto",onError:()=>g(e.id),sx:{height:"100%",objectFit:"cover"}}):e.title||e.author?t.jsx(m,{sx:{height:"100%",width:"100%",display:"flex",alignItems:"center",justifyContent:"center",px:1.75,overflow:"hidden"},children:t.jsxs(m,{sx:{width:"100%"},children:[t.jsx(u,{variant:"body2",sx:{fontWeight:700,textAlign:"center",color:"text.primary",fontSize:{xs:"0.65rem",sm:"1rem",md:"1.2rem"},textTransform:"uppercase",letterSpacing:.5,lineHeight:1.5,display:"-webkit-box",WebkitLineClamp:{xs:4,sm:5},WebkitBoxOrient:"vertical",overflow:"hidden",wordBreak:"break-word",textShadow:"0 0 10px rgba(255,255,255,0.8)"},children:e.title}),e.author&&t.jsxs(u,{variant:"subtitle2",sx:{mt:{xs:.5,sm:1.5},textAlign:"center",fontStyle:"italic",color:"text.secondary",fontSize:{xs:"0.7rem",sm:"0.9rem"},display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical",overflow:"hidden"},children:["लेखक : ",e.author]})]})}):t.jsx(c,{variant:"rectangular",height:"100%",animation:"wave"})}),t.jsxs(y,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",p:{xs:.5,sm:1},gap:{xs:.5,sm:1}},children:[e.price>0?t.jsxs(u,{color:"text.primary",fontWeight:600,sx:{fontSize:{xs:"1rem",sm:"1.25rem"}},children:["₹",e.price]}):t.jsx(c,{variant:"text",width:40,animation:"wave"}),t.jsx(R,{variant:"contained",size:"small",onClick:()=>a(e.id),sx:{fontSize:{xs:"0.75rem",sm:"0.875rem"},px:{xs:1,sm:2},py:{xs:.45,sm:.5},minWidth:{xs:40,sm:60},backgroundColor:"#f0b04f","&:hover":{backgroundColor:"#d99a3d"}},children:"Add"})]})]},e.id))}),t.jsx(W,{open:!!i,onClose:d,maxWidth:"sm",children:t.jsxs(D,{sx:{p:0,position:"relative",bgcolor:"#000",display:"flex",justifyContent:"center"},children:[t.jsx(z,{onClick:d,sx:{position:"absolute",top:8,right:8,zIndex:10,color:"#fff",bgcolor:"rgba(0,0,0,0.5)","&:hover":{bgcolor:"rgba(0,0,0,0.8)"}},children:t.jsx(B,{})}),i&&(i.fullImage||i.image)&&t.jsx("img",{src:i.fullImage||i.image,alt:i.title,style:{maxWidth:"100%",maxHeight:"80vh",display:"block",objectFit:"contain"}})]})})]})}export{G as default};
