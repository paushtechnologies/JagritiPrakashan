import{g as w,e as S,r as x,f as M,j as t,s as b,h as I,i as E,B as c,S as m,T as u,c as B,I as R,k as z}from"./index-BJGSD-D4.js";import{S as D}from"./SEO-CfuwGW_7.js";import{C,a as y,D as W}from"./DialogContent-COfgdrRn.js";import{D as A}from"./Dialog-Br9Ouclg.js";function O(r){return w("MuiCardMedia",r)}S("MuiCardMedia",["root","media","img"]);const N=r=>{const{classes:a,isMediaComponent:o,isImageComponent:i}=r;return E({root:["root",o&&"media",i&&"img"]},O,a)},T=b("div",{name:"MuiCardMedia",slot:"Root",overridesResolver:(r,a)=>{const{ownerState:o}=r,{isMediaComponent:i,isImageComponent:l}=o;return[a.root,i&&a.media,l&&a.img]}})({display:"block",backgroundSize:"cover",backgroundRepeat:"no-repeat",backgroundPosition:"center",variants:[{props:{isMediaComponent:!0},style:{width:"100%"}},{props:{isImageComponent:!0},style:{objectFit:"cover"}}]}),P=["video","audio","picture","iframe","img"],k=["picture","img"],G=x.forwardRef(function(a,o){const i=M({props:a,name:"MuiCardMedia"}),{children:l,className:g,component:d="div",image:n,src:h,style:p,...e}=i,s=P.includes(d),v=!s&&n?{backgroundImage:`url("${n}")`,...p}:p,f={...i,component:d,isMediaComponent:s,isImageComponent:k.includes(d)},j=N(f);return t.jsx(T,{className:I(j.root,g),as:d,role:!s&&n?"img":void 0,ref:o,style:v,ownerState:f,src:s?n||h:void 0,...e,children:l})});function _({books:r=[],addToCart:a,loading:o=!1}){const[i,l]=x.useState(null),g=x.useRef(null),d=()=>l(null),[n,h]=x.useState({});x.useEffect(()=>{!o&&r.length>0&&r.forEach(e=>{const s=[];e.price>0||s.push("price (invalid/zero)"),e.image||s.push("image (missing source)"),n[e.id]&&s.push("image (failed to load)"),s.length>0&&console.warn(`[Gallery Debug] ID ${e.id} | "${e.title}" missing: ${s.join(", ")}`)})},[r,o,n]);const p=e=>{h(s=>({...s,[e]:!0}))};return t.jsxs(c,{ref:g,sx:{mt:{xs:2,sm:8},mb:{xs:4,sm:8}},children:[t.jsx(D,{title:"Gallery",description:"Browse our complete collection of books on Hindu philosophy, culture, and history."}),t.jsx(c,{sx:{px:{xs:1,sm:0},mt:{xs:1,sm:2},display:"grid",gridTemplateColumns:{xs:"repeat(3, 1fr)",sm:"repeat(3,1fr)",md:"repeat(5,1fr)",lg:"repeat(7,1fr)"},gap:{xs:1,sm:2}},children:o?Array.from(new Array(21)).map((e,s)=>t.jsxs(C,{sx:{width:"100%",height:"100%",borderRadius:{xs:1,sm:2},boxShadow:{xs:2,sm:3}},children:[t.jsx(m,{variant:"rectangular",height:200,animation:"wave"}),t.jsxs(y,{sx:{p:1},children:[t.jsx(m,{variant:"text",width:"60%"}),t.jsx(m,{variant:"rectangular",width:50,height:24,sx:{mt:1}})]})]},s)):r.filter(e=>e.display==="card").map((e,s)=>t.jsxs(C,{sx:{width:"100%",display:"flex",flexDirection:"column",borderRadius:{xs:1,sm:2},boxShadow:{xs:3,sm:6},height:{xs:"95%",md:"99%"},overflow:"hidden",transition:"transform 0.2s ease-out",willChange:"transform","&:hover":{transform:"translateY(-4px) scale(1.02)"}},children:[t.jsx(c,{sx:{position:"relative",height:{xs:150,sm:200,md:230},cursor:"pointer",backgroundColor:"#f7f7f7",overflow:"hidden"},onClick:()=>l(e),children:e.image&&!n[e.id]?t.jsx(G,{component:"img",image:e.image,alt:e.title,loading:s<21?"eager":"lazy",decoding:"async",fetchPriority:s<21?"high":"auto",onError:()=>p(e.id),sx:{height:"100%",objectFit:"cover"}}):e.title||e.author?t.jsx(c,{sx:{height:"100%",width:"100%",display:"flex",alignItems:"center",justifyContent:"center",px:1.75,overflow:"hidden"},children:t.jsxs(c,{sx:{width:"100%"},children:[t.jsx(u,{variant:"body2",sx:{fontWeight:700,textAlign:"center",color:"text.primary",fontSize:{xs:"0.65rem",sm:"1rem",md:"1.2rem"},textTransform:"uppercase",letterSpacing:.5,lineHeight:1.5,display:"-webkit-box",WebkitLineClamp:{xs:4,sm:5},WebkitBoxOrient:"vertical",overflow:"hidden",wordBreak:"break-word",textShadow:"0 0 10px rgba(255,255,255,0.8)"},children:e.title}),e.author&&t.jsxs(u,{variant:"subtitle2",sx:{mt:{xs:.5,sm:1.5},textAlign:"center",fontStyle:"italic",color:"text.secondary",fontSize:{xs:"0.7rem",sm:"0.9rem"},display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical",overflow:"hidden"},children:["लेखक : ",e.author]})]})}):t.jsx(m,{variant:"rectangular",height:"100%",animation:"wave"})}),t.jsxs(y,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",p:{xs:.5,sm:1},gap:{xs:.5,sm:1}},children:[e.price>0?t.jsxs(u,{color:"text.primary",fontWeight:600,sx:{fontSize:{xs:"1rem",sm:"1.25rem"}},children:["₹",e.price]}):t.jsx(m,{variant:"text",width:40,animation:"wave"}),t.jsx(B,{variant:"contained",size:"small",onClick:()=>a(e.id),sx:{fontSize:{xs:"0.75rem",sm:"0.875rem"},px:{xs:1,sm:2},py:{xs:.45,sm:.5},minWidth:{xs:40,sm:60},backgroundColor:"#f0b04f","&:hover":{backgroundColor:"#d99a3d"}},children:"Add"})]})]},e.id))}),t.jsx(A,{open:!!i,onClose:d,maxWidth:"sm",children:t.jsxs(W,{sx:{p:0,position:"relative",bgcolor:"#000",display:"flex",justifyContent:"center"},children:[t.jsx(R,{onClick:d,sx:{position:"absolute",top:8,right:8,zIndex:10,color:"#fff",bgcolor:"rgba(0,0,0,0.5)","&:hover":{bgcolor:"rgba(0,0,0,0.8)"}},children:t.jsx(z,{})}),i&&(i.fullImage||i.image)&&t.jsx("img",{src:i.fullImage||i.image,alt:i.title,style:{maxWidth:"100%",maxHeight:"80vh",display:"block",objectFit:"contain"}})]})})]})}export{_ as default};
