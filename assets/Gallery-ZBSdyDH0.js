import{g as B,e as R,r as h,f as E,j as s,s as z,h as D,i as k,B as n,S as p,T as x,c as S,D as A,P as O,b as P,I as T,k as N}from"./index-HQq-A0_w.js";import{S as F}from"./SEO-Cjb56_Ok.js";import{C as I,a as M,D as Q}from"./DialogContent-Cqk4U2z5.js";import{S as W}from"./Stack-jF9wnkyf.js";import{D as G}from"./Dialog-2E3yvBux.js";function H(r){return B("MuiCardMedia",r)}R("MuiCardMedia",["root","media","img"]);const U=r=>{const{classes:a,isMediaComponent:o,isImageComponent:i}=r;return k({root:["root",o&&"media",i&&"img"]},H,a)},$=z("div",{name:"MuiCardMedia",slot:"Root",overridesResolver:(r,a)=>{const{ownerState:o}=r,{isMediaComponent:i,isImageComponent:d}=o;return[a.root,i&&a.media,d&&a.img]}})({display:"block",backgroundSize:"cover",backgroundRepeat:"no-repeat",backgroundPosition:"center",variants:[{props:{isMediaComponent:!0},style:{width:"100%"}},{props:{isImageComponent:!0},style:{objectFit:"cover"}}]}),L=["video","audio","picture","iframe","img"],_=["picture","img"],Y=h.forwardRef(function(a,o){const i=E({props:a,name:"MuiCardMedia"}),{children:d,className:y,component:c="div",image:l,src:j,style:g,...u}=i,m=L.includes(c),C=!m&&l?{backgroundImage:`url("${l}")`,...g}:g,f={...i,component:c,isMediaComponent:m,isImageComponent:_.includes(c)},v=U(f);return s.jsx($,{className:D(v.root,y),as:c,role:!m&&l?"img":void 0,ref:o,style:C,ownerState:f,src:m?l||j:void 0,...u,children:d})});function Z({books:r=[],addToCart:a,loading:o=!1}){const[i,d]=h.useState(null),y=h.useRef(null),c=()=>d(null),[l,j]=h.useState({}),[g,u]=h.useState({}),m=(e,t)=>{(t===""||parseInt(t)>=0&&parseInt(t)<=99999)&&u(w=>({...w,[e]:t}))},C=(e,t)=>{(t===""||parseInt(t)<1)&&u(w=>({...w,[e]:1}))};h.useEffect(()=>{!o&&r.length>0&&r.forEach(e=>{const t=[];e.price>0||t.push("price (invalid/zero)"),e.image||t.push("image (missing source)"),l[e.id]&&t.push("image (failed to load)"),t.length>0&&console.warn(`[Gallery Debug] ID ${e.id} | "${e.title}" missing: ${t.join(", ")}`)})},[r,o,l]);const f=e=>{j(t=>({...t,[e]:!0}))},v=r.filter(e=>e.display==="card"),b=r.filter(e=>e.display==="list");return s.jsxs(n,{ref:y,sx:{mt:{xs:2,sm:4},mb:{xs:4,sm:8}},children:[s.jsx(F,{title:"Gallery",description:"Browse our complete collection of books on Hindu philosophy, culture, and history."}),s.jsx(n,{sx:{px:{xs:1,sm:0},mt:{xs:1,sm:2},display:"grid",gridTemplateColumns:{xs:"repeat(3, 1fr)",sm:"repeat(3,1fr)",md:"repeat(5,1fr)",lg:"repeat(7,1fr)"},gap:{xs:1,sm:2}},children:o?Array.from(new Array(21)).map((e,t)=>s.jsxs(I,{sx:{width:"100%",height:"100%",borderRadius:{xs:1,sm:2},boxShadow:{xs:2,sm:3}},children:[s.jsx(p,{variant:"rectangular",height:200,animation:"wave"}),s.jsxs(M,{sx:{p:1},children:[s.jsx(p,{variant:"text",width:"60%"}),s.jsx(p,{variant:"rectangular",width:50,height:24,sx:{mt:1}})]})]},t)):v.map((e,t)=>s.jsxs(I,{sx:{width:"100%",display:"flex",flexDirection:"column",borderRadius:{xs:1,sm:2},boxShadow:{xs:3,sm:6},height:{xs:"95%",md:"99%"},overflow:"hidden",transition:"transform 0.2s ease-out",willChange:"transform","&:hover":{transform:"translateY(-4px) scale(1.02)"}},children:[s.jsx(n,{sx:{position:"relative",height:{xs:150,sm:200,md:230},cursor:"pointer",backgroundColor:"#f7f7f7",overflow:"hidden"},onClick:()=>d(e),children:e.image&&!l[e.id]?s.jsx(Y,{component:"img",image:e.image,alt:e.title,loading:t<21?"eager":"lazy",decoding:"async",fetchPriority:t<21?"high":"auto",onError:()=>f(e.id),sx:{height:"100%",objectFit:"cover"}}):e.title||e.author?s.jsx(n,{sx:{height:"100%",width:"100%",display:"flex",alignItems:"center",justifyContent:"center",px:1.75,overflow:"hidden"},children:s.jsxs(n,{sx:{width:"100%"},children:[s.jsx(x,{variant:"body2",sx:{fontWeight:700,textAlign:"center",color:"text.primary",fontSize:{xs:"0.65rem",sm:"1rem",md:"1.2rem"},textTransform:"uppercase",letterSpacing:.5,lineHeight:1.5,display:"-webkit-box",WebkitLineClamp:{xs:4,sm:5},WebkitBoxOrient:"vertical",overflow:"hidden",wordBreak:"break-word",textShadow:"0 0 10px rgba(255,255,255,0.8)"},children:e.title}),e.author&&s.jsxs(x,{variant:"subtitle2",sx:{mt:{xs:.5,sm:1.5},textAlign:"center",fontStyle:"italic",color:"text.secondary",fontSize:{xs:"0.7rem",sm:"0.9rem"},display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical",overflow:"hidden"},children:["लेखक : ",e.author]})]})}):s.jsx(p,{variant:"rectangular",height:"100%",animation:"wave"})}),s.jsxs(M,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",p:{xs:.5,sm:1},gap:{xs:.5,sm:1}},children:[e.price>0?s.jsxs(x,{color:"text.primary",fontWeight:600,sx:{fontSize:{xs:"1rem",sm:"1.25rem"}},children:["₹",e.price]}):s.jsx(p,{variant:"text",width:40,animation:"wave"}),s.jsx(S,{variant:"contained",size:"small",onClick:()=>a(e.id),sx:{fontSize:{xs:"0.75rem",sm:"0.875rem"},px:{xs:1,sm:2},py:{xs:.45,sm:.5},minWidth:{xs:40,sm:60},backgroundColor:"#f0b04f","&:hover":{backgroundColor:"#d99a3d"}},children:"Add"})]})]},e.id))}),!o&&b.length>0&&s.jsxs(n,{sx:{mt:{xs:3,sm:6}},children:[s.jsx(A,{sx:{mb:3}}),s.jsx(W,{spacing:1.5,children:b.map(e=>s.jsxs(O,{variant:"outlined",sx:{p:2,display:"flex",flexDirection:{xs:"column",sm:"row"},justifyContent:"space-between",alignItems:{xs:"flex-start",sm:"center"},gap:2,borderRadius:3,bgcolor:"rgba(255, 255, 255, 0.8)",backdropFilter:"blur(8px)",border:"1px solid rgba(0,0,0,0.05)",transition:"all 0.3s ease","&:hover":{bgcolor:"#fff",boxShadow:"0 8px 25px rgba(0,0,0,0.05)",borderColor:"primary.main"}},children:[s.jsxs(n,{sx:{flex:1,minWidth:0,ml:{xs:0,md:2}},children:[s.jsx(x,{variant:"subtitle1",fontWeight:800,sx:{color:"#1a1a1a",fontSize:"1.05rem",lineHeight:1.2,mb:.5},children:e.title}),s.jsxs(W,{direction:{xs:"column",sm:"row"},spacing:{xs:.5,sm:1.5},alignItems:{xs:"flex-start",sm:"center"},children:[e.author&&s.jsxs(x,{variant:"body2",color:"text.secondary",sx:{fontWeight:500},children:["लेखक: ",e.author]}),e.author&&e.publisher&&s.jsx(n,{sx:{display:{xs:"none",sm:"block"},width:4,height:4,bgcolor:"divider",borderRadius:"50%"}}),e.publisher&&s.jsxs(x,{variant:"body2",color:"text.secondary",sx:{opacity:.8},children:["प्रकाशन: ",e.publisher]})]})]}),s.jsxs(n,{sx:{display:"flex",alignItems:"center",gap:{xs:1.5,sm:2},width:{xs:"100%",sm:"auto"},justifyContent:{xs:"space-between",sm:"flex-end"}},children:[e.price>0?s.jsxs(x,{fontWeight:800,color:"success.main",sx:{fontSize:"1.2rem",minWidth:"80px"},children:["₹",e.price]}):s.jsx(p,{variant:"text",width:60,height:30,animation:"wave"}),s.jsxs(n,{sx:{display:"flex",alignItems:"center",gap:1},children:[s.jsx(P,{type:"number",size:"small",label:"Qty",value:g[e.id]??1,onChange:t=>m(e.id,t.target.value),onBlur:t=>C(e.id,t.target.value),inputProps:{min:1,max:99999,style:{textAlign:"center",fontWeight:600}},sx:{width:105,"& .MuiOutlinedInput-root":{borderRadius:2,bgcolor:"#fff"}}}),s.jsx(S,{variant:"contained",onClick:()=>a(e.id,parseInt(g[e.id])||1),sx:{bgcolor:"#f0b04f",color:"#fff",fontWeight:600,textTransform:"none",borderRadius:2,px:4,py:1,boxShadow:"0 4px 10px rgba(240, 176, 79, 0.2)","&:hover":{bgcolor:"#d99a3d",boxShadow:"0 6px 15px rgba(240, 176, 79, 0.3)"}},children:"Add"})]})]})]},e.id))})]}),s.jsx(G,{open:!!i,onClose:c,maxWidth:"sm",children:s.jsxs(Q,{sx:{p:0,position:"relative",bgcolor:"#000",display:"flex",justifyContent:"center"},children:[s.jsx(T,{onClick:c,sx:{position:"absolute",top:8,right:8,zIndex:10,color:"#fff",bgcolor:"rgba(0,0,0,0.5)","&:hover":{bgcolor:"rgba(0,0,0,0.8)"}},children:s.jsx(N,{})}),i&&(i.fullImage||i.image)&&s.jsx("img",{src:i.fullImage||i.image,alt:i.title,style:{maxWidth:"100%",maxHeight:"80vh",display:"block",objectFit:"contain"}})]})})]})}export{Z as default};
