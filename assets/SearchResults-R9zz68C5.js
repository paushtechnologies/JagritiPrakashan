import{a as w,R as f,j as s,B as r,T as i,G as l,D as R,P as v,S as k,b as I,c as $,L as C}from"./index-1hZ873J2.js";import{B as g}from"./BookCard-DEMCbXmM.js";import{S as B}from"./SEO-Bivr7LG5.js";import{S as j}from"./Stack-CVASjxkB.js";import"./DialogContent-BwXBe0q6.js";import"./Dialog-D7_gvQye.js";function Q({books:y=[],addToCart:m,loading:c=!1}){const n=new URLSearchParams(w().search).get("q")||"",o=n.trim().toLowerCase(),d=o?y.filter(e=>`${e.title} ${e.author||""} ${e.isbn||""} ${e.publisher||""} ${e.category||""} ${e.description||""}`.toLowerCase().includes(o)):[],x=d.filter(e=>e.display==="card"),a=d.filter(e=>e.display==="list"),[p,u]=f.useState({}),b=(e,t)=>{(t===""||parseInt(t)>=0&&parseInt(t)<=99999)&&u(h=>({...h,[e]:t}))},S=(e,t)=>{(t===""||parseInt(t)<1)&&u(h=>({...h,[e]:1}))};return f.useEffect(()=>{!c&&a.length>0&&a.forEach(e=>{e.price>0||console.warn(`[SearchResults Debug] List Item ID ${e.id} | "${e.title}" has invalid/missing price: ${e.price}`)})},[a,c]),s.jsxs(r,{sx:{mt:{xs:2,sm:4},mb:4,px:2},children:[s.jsx(B,{title:o?`Search Results for "${n}"`:"Search",description:`Search results for ${n} at Jagriti Prakashan.`}),s.jsxs(i,{variant:"h5",sx:{mb:2},children:["Search results for “",n,"”"]}),c?s.jsx(l,{container:!0,spacing:2,children:Array.from(new Array(8)).map((e,t)=>s.jsx(l,{item:!0,xs:12,sm:6,md:3,children:s.jsx(g,{loading:!0})},t))}):o===""?s.jsx(i,{children:"Enter a search term in the header to find books."}):d.length===0?s.jsx(i,{children:"No results found."}):s.jsxs(s.Fragment,{children:[x.length>0&&s.jsx(l,{container:!0,spacing:2,sx:{mb:4},children:x.map(e=>s.jsx(l,{item:!0,xs:12,sm:6,md:3,children:s.jsx(g,{book:e,onAddToCart:m})},e.id))}),a.length>0&&s.jsxs(r,{children:[x.length>0&&s.jsx(R,{sx:{my:3}}),s.jsx(j,{spacing:1.5,children:a.map(e=>s.jsxs(v,{variant:"outlined",sx:{p:2,display:"flex",flexDirection:{xs:"column",sm:"row"},justifyContent:"space-between",alignItems:{xs:"flex-start",sm:"center"},gap:2,borderColor:"primary.main",borderRadius:3,bgcolor:"rgba(255, 255, 255, 0.25)",backdropFilter:"blur(8px)",border:"1px solid rgba(0,0,0,0.05)",transition:"all 0.3s ease","&:hover":{bgcolor:"#fff",boxShadow:"0 8px 25px rgba(0,0,0,0.05)",borderColor:"primary.main"}},children:[s.jsxs(r,{sx:{flex:1,minWidth:0},children:[s.jsx(i,{variant:"subtitle1",fontWeight:800,sx:{color:"#1a1a1a",fontSize:"1.05rem",lineHeight:1.2,mb:.5},children:e.title}),s.jsxs(j,{direction:{xs:"column",sm:"row"},spacing:{xs:.5,sm:1.5},alignItems:{xs:"flex-start",sm:"center"},children:[e.author&&s.jsxs(i,{variant:"body2",color:"text.secondary",sx:{fontWeight:500},children:["लेखक: ",e.author]}),e.author&&e.publisher&&s.jsx(r,{sx:{display:{xs:"none",sm:"block"},width:4,height:4,bgcolor:"divider",borderRadius:"50%"}}),e.publisher&&s.jsxs(i,{variant:"body2",color:"text.secondary",sx:{opacity:.8},children:["प्रकाशन: ",e.publisher]})]})]}),s.jsxs(r,{sx:{display:"flex",alignItems:"center",gap:{xs:1.5,sm:2},width:{xs:"100%",sm:"auto"},justifyContent:{xs:"space-between",sm:"flex-end"}},children:[e.price>0?s.jsxs(i,{fontWeight:800,color:"success.main",sx:{fontSize:"1.2rem",minWidth:"80px"},children:["₹",e.price]}):s.jsx(k,{variant:"text",width:60,height:30,animation:"wave"}),s.jsxs(r,{sx:{display:"flex",alignItems:"center",gap:1},children:[s.jsx(I,{type:"number",size:"small",label:"Qty",value:p[e.id]??1,onChange:t=>b(e.id,t.target.value),onBlur:t=>S(e.id,t.target.value),inputProps:{min:1,max:99999,style:{textAlign:"center",fontWeight:600}},sx:{width:105,"& .MuiOutlinedInput-root":{borderRadius:2,bgcolor:"#fff"}}}),s.jsx($,{variant:"contained",onClick:()=>m(e.id,parseInt(p[e.id])||1),sx:{bgcolor:"#f0b04f",color:"#fff",fontWeight:800,textTransform:"none",borderRadius:2,px:5,py:1,boxShadow:"0 4px 10px rgba(240, 176, 79, 0.2)","&:hover":{bgcolor:"#d99a3d",boxShadow:"0 6px 15px rgba(240, 176, 79, 0.3)"}},children:"Add"})]})]})]},e.id))})]})]}),s.jsx(r,{sx:{mt:3},children:s.jsx(C,{to:"/",children:"Back to Home"})})]})}export{Q as default};
